<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl js" xmlns="http://www.w3.org/1999/xhtml"
xmlns:js="urn:custom-javascript" xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
  <xsl:param name="bien" select="0"/>
  <xsl:param name="bien1" select="0"/>

  <xsl:variable name="itemCount">
    <xsl:value-of select="count(Invoice//Content//Products//Product)"/>
  </xsl:variable>

  <xsl:template name="addZero">
    <xsl:param name="count"/>
    <xsl:if test="$count > 0">
      <xsl:text>0</xsl:text>
      <xsl:call-template name="addZero">
        <xsl:with-param name="count" select="$count - 1"/>
      </xsl:call-template>
    </xsl:if>
  </xsl:template>

  <xsl:template name="congphi">
    <xsl:param name="count"/>
    <xsl:if test="$count > 0">
      <xsl:value-of select="$count">
      </xsl:value-of>
      <xsl:text>0</xsl:text>
      <xsl:call-template name="addZero">
        <xsl:with-param name="count" select="$count - 1"/>
      </xsl:call-template>
    </xsl:if>
  </xsl:template>

  <xsl:template name="addDots">
    <xsl:param name="val"/>
    <xsl:param name="val1"/>
    <xsl:param name="val2"/>
    <xsl:param name="i" select="1"/>
    <xsl:if test="$val1>0">
      <xsl:choose>
        <xsl:when test="$val2 !=0">
          <xsl:value-of select="substring($val,$i,$val2)"/>
          <xsl:if test="substring($val,$i+$val2+1,1) !=''">
            <xsl:text>.</xsl:text>
          </xsl:if>
          <xsl:call-template name="addDots">
            <xsl:with-param name="val" select="$val"/>
            <xsl:with-param name="val1" select="$val1 - 1"/>
            <xsl:with-param name="i" select="$i + $val2"/>
            <xsl:with-param name="val2" select="3"/>
          </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
          <!--<xsl:text>test</xsl:text>-->
          <xsl:value-of select="substring($val,$i,3)"/>
          <xsl:if test="substring($val,$i+3,1) !=''">
            <xsl:text>.</xsl:text>
          </xsl:if>
          <xsl:call-template name="addDots">
            <xsl:with-param name="val" select="$val"/>
            <xsl:with-param name="val1" select="$val1 - 1"/>
            <xsl:with-param name="i" select="$i + 3"/>
            <xsl:with-param name="val2" select="3"/>
          </xsl:call-template>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:if>
  </xsl:template>

  <xsl:template name="addLine">
    <xsl:param name="count"/>
    <xsl:if test="$count > 0">
      <tr class="noline back">
        <td class="back-bold" height="13px">
          <xsl:value-of select="''"/>
        </td>
        <td class="back-bold" height="13px">
          <xsl:value-of select="''"/>
        </td>
        <td class="back-bold" height="13px">
          <xsl:value-of select="''"/>
        </td>
        <td class="back-bold" height="13px">
          <xsl:value-of select="''"/>
        </td>
        <td class="back-bold" height="13px">
          <xsl:value-of select="''"/>
        </td>
        <td class="back-bold">
          <xsl:value-of select="''"/>
        </td>
      </tr>
      <xsl:call-template name="addLine">
        <xsl:with-param name="count" select="$count - 1"/>
      </xsl:call-template>
    </xsl:if>
  </xsl:template>
  <xsl:template match="/">
    
  {{> body}}


  </xsl:template>

</xsl:stylesheet>